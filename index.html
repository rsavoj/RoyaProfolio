<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="author" content="Roya Savoj">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="keywords" content="Roya, Resume, Goals, contact, Savoj">
    <title>Roya Savoj Profolio</title>
    <link rel="Royasstylesheet" href="styles.css">
</head>

<body>
   

    <main>
        <section id="formCutoff" action="https://httpbin.org/post" method="POST">
            <h3>Final Exam Predictor</h3>
            <form>
                <label for="fullName" class="preSub">Name: </label>
                <input type="name" class="preSub" id="name" name="name">
                <br>
                <label for="email" class="preSub">Email: </label>
                <input type="email" class="preSub" id="email" name="email">
                <br>
                <input type="submit" class="preSub" value="submit" id="submit">
                <output id="message"></output>

            </form>
            <script > 
                let button = document.getElementById('submit');
                button.addEventListener('click', function(){jsSubmit(event)});


                function jsSubmit(event){
                    let form = document.getElementById('form');
                    event.preventDefault();
                    let element = document.querySelectorAll('.preSub');
                    for( let el = 0; el< element.length; el++){
                        element[el].style.visibility = "hidden";
                    }
                    let button = document.getElementById('message');
                    message.textContent = "Submitting your prediction ..."
                    let xhr = new XMLHttpRequest();
                    xhr.open("POST", "https://httpbin.org/post", true)
                    let dataToSend = new FormData(form);
                    xhr.setRequestHeader('sent-By', 'JS');
                    xhr.setRequestHeader('content-Type', 'application/x-www-form-urlencoded');
                    
                    xhr.onload = function(){handleResponce(xhr)}
                    
                   
                    xhr.send(formData);
                    


                }
                function handleResponce(xhr){
                    if(xhr.status ==200 && xhr.readyState == 4){
                        message = getElementById('message');
                        name = xhr.responce.name;
                        outcome = xhr.responce.output;
                        message.textContent = `Greetings ${name} your prediction ${prediction}`
        
                    }
                    else{
                        console.log('There was an Errpr ' + xhr.statusText);
                    }
                }
            </script>
        </section>
    </main>
 
    


</body>

</html>
